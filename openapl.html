<!DOCTYPE html>
<html>
<head>
    <title>APL Interpreter</title>
</head>
<body>
    <div id="container"></div>
    <script>
        function loadAndInterpretAPL() {
            fetch('/path/to/homepage.apl')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Dosya yüklenemedi: ' + response.statusText);
                    }
                    return response.text();
                })
                .then(fileContent => {
                    interpretAPL(fileContent);
                })
                .catch(error => {
                    console.error('Hata:', error);
                });
        }

        function interpretAPL(fileContent) {
            const commands = fileContent.split(';').filter(Boolean);
            const container = document.getElementById('container');

            commands.forEach(command => {
                const parts = command.split('/');
                const action = parts[0]?.trim();
                const args = parts.slice(1).map(arg => arg?.trim());

                if (!action) {
                    console.warn('Geçersiz komut:', command);
                    return;
                }

                switch (action) {
                    case 'crd': handlePosition(args, container); break;
                    case 'newjoysitik': handleNewJoystick(args); break;
                    case 'screenimage': handleScreenImage(args); break;
                    case 'screenvideo': handleScreenVideo(args); break;
                    case 'createobj': handleCreateObj(args, container); break;
                    case 'alert': handleAlert(args); break;
                    case 'consolelog': handleConsoleLog(args); break;
                    case 'changecolor': handleChangeColor(args); break;
                    case 'resize': handleResize(args); break;
                    case 'appendtext': handleAppendText(args, container); break;
                    case 'navigate': handleNavigate(args); break;
                    case 'createtextbox': handleCreateTextBox(args, container); break;
                    case 'removeobj': handleRemoveObj(args); break;
                    case 'setbackground': handleSetBackground(args); break;
                    case 'playaudio': handlePlayAudio(args, container); break;
                    case 'stopaudio': handleStopAudio(args); break;
                    case 'playvideo': handlePlayVideo(args, container); break;
                    case 'stopvideo': handleStopVideo(args); break;
                    case 'downloadfile': handleDownloadFile(args); break;
                    case 'uploadfile': handleUploadFile(args); break;
                    case 'setfontsize': handleSetFontSize(args); break;
                    case 'setfontstyle': handleSetFontStyle(args); break;
                    case 'showpopup': handleShowPopup(args, container); break;
                    case 'closepopup': handleClosePopup(args); break;
                    case 'createlink': handleCreateLink(args, container); break;
                    case 'setvisibility': handleSetVisibility(args); break;
                    case 'disableobj': handleDisableObj(args); break;
                    case 'enableobj': handleEnableObj(args); break;
                    case 'moveobj': handleMoveObj(args); break;
                    case 'rotobj': handleRotObj(args); break;
                    case 'scaleobj': handleScaleObj(args); break;
                    case 'createlist': handleCreateList(args, container); break;
                    case 'addtolist': handleAddToList(args); break;
                    case 'removefromlist': handleRemoveFromList(args); break;
                    case 'createimage': handleCreateImage(args, container); break;
                    case 'setopacity': handleSetOpacity(args); break;
                    case 'createmenu': handleCreateMenu(args, container); break;
                    case 'addtomenu': handleAddToMenu(args); break;
                    case 'removefrommenu': handleRemoveFromMenu(args); break;
                    case 'setborder': handleSetBorder(args); break;
                    default: console.warn('Bilinmeyen komut:', action);
                }
            });
        }

        // Komut işleyiciler

        // 1. crd - Objelerin sayfada yerini belirleme
        function handlePosition(args, container) {
            const position = parseInt(args[0]);
            switch(position) {
                case 1: container.style.position = 'absolute'; container.style.top = '0'; container.style.left = '0'; break;
                case 2: container.style.position = 'absolute'; container.style.top = '0'; container.style.right = '0'; break;
                case 3: container.style.position = 'absolute'; container.style.bottom = '0'; container.style.left = '0'; break;
                case 4: container.style.position = 'absolute'; container.style.bottom = '0'; container.style.right = '0'; break;
                case 5: container.style.position = 'absolute'; container.style.top = '50%'; container.style.left = '50%'; container.style.transform = 'translate(-50%, -50%)'; break;
                default: console.warn('Geçersiz konum:', args);
            }
        }

        // 2. newjoysitik - Yeni joystick hareket komutları
        function handleNewJoystick(args) {
            const direction = args[0]; // 'saq', 'sol', 'ön', 'arka'
            const action = args[1];     // 'hareket' veya 'işlem'
            const color = args[2];      // Renk kodu

            console.log(`Joystick yönü: ${direction}, Aksiyon: ${action}, Renk: ${color}`);
            // Burada joystick hareketine göre aksiyon alınabilir
        }

        // 3. screenimage - Ekran arka planını resim ile değiştirme
        function handleScreenImage(args) {
            const imageSrc = args[0];
            document.body.style.backgroundImage = `url(${imageSrc})`;
        }

        // 4. screenvideo - Ekran arka planını video ile değiştirme
        function handleScreenVideo(args) {
            const videoSrc = args[0];
            const videoElement = document.createElement('video');
            videoElement.src = videoSrc;
            videoElement.autoplay = true;
            videoElement.loop = true;
            videoElement.style.position = 'absolute';
            videoElement.style.top = '0';
            videoElement.style.left = '0';
            document.body.appendChild(videoElement);
        }

        // Diğer komutlar için fonksiyonlar burada tanımlanacaktır.
        
        document.addEventListener('DOMContentLoaded', loadAndInterpretAPL);
    </script>
</body>
</html>

